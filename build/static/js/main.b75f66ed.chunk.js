(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),a=n(20),o=n(4),u=n(3),i=n(1),s=n(0),d=function(e){var t=e.handleAdd,n=e.newName,r=e.handleChange,c=e.number,a=e.setNumber;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name:"," ",Object(s.jsx)("input",{value:n,name:"name",onChange:function(e){return r(e)}}),Object(s.jsxs)("div",{children:["number:"," ",Object(s.jsx)("input",{name:"number",value:c,onChange:function(e){return a(e.target.value)}})]})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var t=e.filtered,n=e.onDelete;return Object(s.jsx)("div",{children:t.map((function(e){return Object(s.jsxs)("p",Object(o.a)(Object(o.a)({},e),{},{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return n(e)},children:"delete"})]}),e.name)}))})},b=function(e){var t=e.search,n=e.setSearch;return Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},name:"search"})]})},j=n(9),f=n.n(j),h=n(19),m=n(6),O=n.n(m),p="http://localhost:3001/api/persons",v={getAll:function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.get(p),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(e){return O.a.post(p,e)},remove:function(e){return O.a.delete("".concat(p,"/").concat(e.id))},update:function(e){return O.a.put("".concat(p,"/").concat(e.id),e)}},x=function(e){var t=e.message,n={color:e.error?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return null===t?null:Object(s.jsx)("div",{style:n,children:t})},g=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),j=Object(u.a)(c,2),f=j[0],h=j[1],m=Object(i.useState)(""),O=Object(u.a)(m,2),p=O[0],g=O[1],w=Object(i.useState)(null),S=Object(u.a)(w,2),k=S[0],y=S[1],C=Object(i.useState)(!1),N=Object(u.a)(C,2),A=N[0],D=N[1],T=Object(i.useState)(""),E=Object(u.a)(T,2),B=E[0],I=E[1];Object(i.useEffect)((function(){v.getAll().then((function(e){var t=e.data;return r(t)})).catch((function(e){return console.log(e)}))}),[]);var J=n.filter((function(e){return e.name.toLowerCase().includes(B.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(x,{message:k,error:A}),Object(s.jsx)(b,{search:B,setSearch:I}),Object(s.jsx)("h1",{children:"add new"}),Object(s.jsx)(d,{handleAdd:function(e){e.preventDefault();var t={name:f,number:p};if(n.some((function(e){return e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook. Replace the old number with a new one?"))){var c=n.find((function(e){return e.name===t.name})),u=Object(o.a)(Object(o.a)({},c),{},{number:p});v.update(u).then((function(e){var t=e.data;r(n.map((function(e){return e.id!==t.id?e:t}))),D(!1),y("Edited ".concat(t.name)),setTimeout((function(){y(null)}),5e3),h(""),g("")})).catch((function(e){console.log(e.response.data)}))}}else v.create(t).then((function(e){var t=e.data;D(!1),y("Added ".concat(t.name)),setTimeout((function(){y(null)}),5e3),r([].concat(Object(a.a)(n),[t])),h(""),g("")}))},handleChange:function(e){h(e.target.value)},number:p,setNumber:g,newName:f}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(l,{filtered:J,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&v.remove(e).then((function(){D(!1);var t=n.filter((function(t){return e.id===t.id}))[0];r(n.filter((function(t){return e.id!==t.id}))),y("Deleted ".concat(t.name)),setTimeout((function(){y(null)}),4e3)})).catch((function(t){"Not Found"===t.response.statusText&&(D(!0),y("Information of ".concat(e.name," has been removed from server already!")),setTimeout((function(){y(null)}),4e3))}))}})]})};c.a.render(Object(s.jsx)(g,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b75f66ed.chunk.js.map